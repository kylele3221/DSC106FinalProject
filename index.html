<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>The Moving Monsoon</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Rain layer -->
    <div class="rain"></div>

    <!-- Top-right Writeup button -->
    <a href="#writeup" class="writeup-button">Writeup</a>

    <!-- HERO -->
    <section class="hero">
      <div class="hero-content">
        <h1>The Moving Monsoon</h1>
        <p>How climate change shifts the rainfall rhythms of billions.</p>
        <div class="scroll-hint">
          <span>Scroll to explore</span>
          <div class="scroll-arrow"></div>
        </div>
      </div>
    </section>

    <!-- WHAT IS A MONSOON? -->
    <section id="monsoon-intro" class="section section-monsoon">
      <div class="monsoon-grid">
        <!-- LEFT: text -->
        <div class="monsoon-text">
          <h2>What is a monsoon?</h2>
          <p class="monsoon-lede">
            Monsoons are seasonal wind and rainfall patterns that bring
            life-sustaining rains to large parts of the world.
          </p>

          <div class="monsoon-steps">
            <div class="monsoon-step is-active" data-monsoon="ISM">
              <h3>Indian Summer Monsoon (ISM)</h3>
              <p>
                Each summer, moist winds rush inland from the Indian Ocean,
                bringing intense rains to South Asia between about 5°N and 35°N,
                from 60°E to 100°E.
              </p>
            </div>

            <div class="monsoon-step" data-monsoon="WAM">
              <h3>West African Monsoon (WAM)</h3>
              <p>
                Over West Africa, the monsoon delivers rainfall to the Sahel,
                from roughly 5°N to 20°N and 20°W to 20°E, sustaining crops and
                river systems.
              </p>
            </div>

            <div class="monsoon-step" data-monsoon="SAMS">
              <h3>South American Monsoon (SAMS)</h3>
              <p>
                In South America, the monsoon system spans the Amazon and
                central Brazil, between about 5°N and 25°S, and 70°W to 35°W,
                shaping one of the world’s largest rainforest regions.
              </p>
            </div>
          </div>
        </div>

        <!-- RIGHT: globe -->
        <div class="monsoon-globe-wrapper">
          <div id="monsoon-globe"></div>
        </div>
      </div>
    </section>

    <!-- CLIMATE CHANGE & RAINFALL SHIFT: RADIAL PLOTS ONLY -->
    <section id="climate-impact" class="section section-climate">
      <div class="climate-wrapper">
        <!-- HISTORIC RADIAL: ISM + WAM + SAM -->
        <div id="ism-radial-block" class="radial-block">
          <h3>Historic Monsoon Rainfall Cycle (Monsoon Regions)</h3>
          <p class="radial-description">
            Monthly precipitation for three monsoon regions plotted together.
            Use the slider or Play to move through years and compare how their
            seasonal cycles differ.
          </p>

          <div class="radial-legend">
            <div class="radial-legend-item">
              <span class="radial-legend-swatch legend-ism"></span>
              <span>Indian Summer Monsoon (ISM)</span>
            </div>
            <div class="radial-legend-item">
              <span class="radial-legend-swatch legend-wam"></span>
              <span>West African Monsoon (WAM)</span>
            </div>
            <div class="radial-legend-item">
              <span class="radial-legend-swatch legend-sam"></span>
              <span>South American Monsoon (SAMS)</span>
            </div>
          </div>

          <div class="radial-controls">
            <span class="radial-year-label">
              Year: <span id="ism-year-label"></span>
            </span>
            <input type="range" id="ism-year-slider" />
            <button id="ism-play" type="button">Play</button>
          </div>

          <div class="radial-svg-wrapper">
            <svg id="ism-radial-svg"></svg>
          </div>
        </div>

        <!-- FUTURE RADIAL: ISM + WAM + SAM FUTURE -->
        <div id="ism-future-radial-block" class="radial-block">
          <h3>Future Monsoon Rainfall Projections (Monsoon Regions)</h3>
          <p class="radial-description">
            The same radial view, but using future projections from climate
            models. Scroll through future years or press Play to see how the
            seasonal pattern is expected to change across all three monsoon
            regions.
          </p>

          <div class="radial-legend">
            <div class="radial-legend-item">
              <span class="radial-legend-swatch legend-ism"></span>
              <span>Indian Summer Monsoon (ISM)</span>
            </div>
            <div class="radial-legend-item">
              <span class="radial-legend-swatch legend-wam"></span>
              <span>West African Monsoon (WAM)</span>
            </div>
            <div class="radial-legend-item">
              <span class="radial-legend-swatch legend-sam"></span>
              <span>South American Monsoon (SAMS)</span>
            </div>
          </div>

          <div class="radial-controls">
            <span class="radial-year-label">
              Year: <span id="ism-future-year-label"></span>
            </span>
            <input type="range" id="ism-future-year-slider" />
            <button id="ism-future-play" type="button">Play</button>
          </div>

          <div class="radial-svg-wrapper">
            <svg id="ism-future-radial-svg"></svg>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== REGIONAL DEEP DIVES TITLE ===== -->
    <section class="section section-title">
      <h2 class="deep-dive-title">Regional Deep Dives</h2>
    </section>

    <section id="monsoon-slides" class="section section-monsoon-slides">
      <div class="monsoon-slides-grid">
        <!-- ISM -->
        <div class="monsoon-panel">
          <h3>Indian Summer Monsoon</h3>
          <img id="ism-slideshow-frame" alt="ISM rainfall frame" />
          <p id="ism-slideshow-caption">ISM rainfall frame</p>
        </div>

        <!-- WAM -->
        <div class="monsoon-panel">
          <h3>West African Monsoon</h3>
          <img id="wam-slideshow-frame" alt="WAM rainfall frame" />
          <p id="wam-slideshow-caption">WAM rainfall frame</p>
        </div>

        <!-- SAMS -->
        <div class="monsoon-panel">
          <h3>South American Monsoon</h3>
          <img id="sam-slideshow-frame" alt="SAMS rainfall frame" />
          <p id="sam-slideshow-caption">SAMS rainfall frame</p>
        </div>
      </div>
    </section>



    <!-- FULL-WIDTH SCROLLY RESEARCH SECTION -->
    <section id="impact-research" class="section section-impact">
      <div class="impact-scrolly">
        <!-- Sticky viewport with full-screen slides -->
        <div class="impact-viewport">
          <!-- Slide 0: overview -->
          <div class="impact-card is-active" data-slide="0">
            <h2>Well, Why Does this Even Matter?</h2>
            <p class="impact-intro">
              As the planet warms, the water cycle speeds up. Wet regions can
              get even wetter while dry regions dry out, reshaping where and
              when rain falls. For people living under monsoon skies, that
              doesn’t just change the weather — it changes harvests, flooding,
              and who has reliable access to drinking water.
            </p>
          </div>

          <!-- Slide 1: Agriculture -->
          <div class="impact-card" data-slide="1">
            <h3>1. Agriculture: Increasingly Unpredictable and Vulnerable</h3>
            <p class="impact-subtitle">
              Monsoon timing and intensity decide whether fields thrive or fail.
            </p>

            <div class="impact-metrics">
              <div class="metric-box">
                <h4>In Wet Regions</h4>
                <ul>
                  <li>
                    <strong>Flooded fields:</strong> Excess water drowns crops
                    and damages roots.
                  </li>
                  <li>
                    <strong>Soil erosion:</strong> Heavy rainfall strips away
                    fertile topsoil.
                  </li>
                  <li>
                    <strong>Plant diseases:</strong> Warm, humid conditions
                    promote fungal outbreaks.
                  </li>
                  <li>
                    <strong>Yield instability:</strong> Storm damage makes
                    harvests harder to predict.
                  </li>
                </ul>
              </div>

              <div class="metric-box">
                <h4>In Dry Regions</h4>
                <ul>
                  <li>
                    <strong>Drought stress:</strong> Too little rain shrinks
                    yields.
                  </li>
                  <li>
                    <strong>Reduced soil moisture:</strong> Dry, compacted soil
                    becomes less productive.
                  </li>
                  <li>
                    <strong>Shifting crop zones:</strong> Some crops can no
                    longer grow where they used to.
                  </li>
                  <li>
                    <strong>More irrigation:</strong> Farmers lean on
                    groundwater and rivers that may also be shrinking.
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Slide 2: Flooding -->
          <div class="impact-card" data-slide="2">
            <h3>2. Flooding: More Extreme Where Rain Increases</h3>
            <p class="impact-subtitle">
              Stronger downpours turn familiar rivers and streets into hazards.
            </p>

            <div class="impact-metrics">
              <div class="metric-box">
                <h4>In Wet Areas</h4>
                <ul>
                  <li>
                    <strong>Intense rainstorms:</strong> Huge volumes fall in
                    just hours.
                  </li>
                  <li>
                    <strong>River overflow:</strong> River basins flood more
                    often and more severely.
                  </li>
                  <li>
                    <strong>Urban flooding:</strong> Stormwater systems get
                    overwhelmed.
                  </li>
                  <li>
                    <strong>Coastal “compound” floods:</strong> Heavy rain
                    stacks on top of higher seas.
                  </li>
                </ul>
              </div>

              <div class="metric-box">
                <h4>In Drier Landscapes</h4>
                <ul>
                  <li>
                    <strong>Flash floods:</strong> Hard, dry soils absorb water
                    poorly, so rare storms create sudden floods.
                  </li>
                  <li>
                    <strong>Overall trend:</strong> Chronic river flooding
                    decreases while drought becomes the main threat.
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Slide 3: Water Security -->
          <div class="impact-card" data-slide="3">
            <h3>3. Water Security: Too Much in Some Places, Too Little in Others</h3>
            <p class="impact-subtitle">
              The same shifting monsoon can cause floods upstream and empty taps
              downstream.
            </p>

            <div class="impact-metrics">
              <div class="metric-box">
                <h4>In Wet Regions</h4>
                <ul>
                  <li>
                    <strong>Inconsistent supply:</strong> Long dry spells
                    punctuated by huge storms.
                  </li>
                  <li>
                    <strong>Contamination risks:</strong> Floods mix sewage and
                    pollutants into drinking water.
                  </li>
                  <li>
                    <strong>Infrastructure stress:</strong> Reservoirs and dams
                    face overflow and safety concerns.
                  </li>
                </ul>
              </div>

              <div class="metric-box">
                <h4>In Dry Regions</h4>
                <ul>
                  <li>
                    <strong>Chronic shortages:</strong> Less rain and more
                    evaporation dry rivers, lakes, and aquifers.
                  </li>
                  <li>
                    <strong>Groundwater depletion:</strong> People pump more
                    than nature can refill.
                  </li>
                  <li>
                    <strong>Rising competition:</strong> Cities, farms, and
                    ecosystems all fight for the same water.
                  </li>
                  <li>
                    <strong>Migration pressure:</strong> Water stress can push
                    communities to move.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Scroll steps that drive which slide is active -->
        <div class="impact-scroll-steps">
          <div class="impact-step" data-slide="0"></div>
          <div class="impact-step" data-slide="1"></div>
          <div class="impact-step" data-slide="2"></div>
          <div class="impact-step" data-slide="3"></div>
        </div>

        <!-- Dots at bottom of research section -->
        <div class="impact-dots">
          <button
            class="impact-dot is-active"
            data-slide="0"
            aria-label="Slide 1"
          ></button>
          <button
            class="impact-dot"
            data-slide="1"
            aria-label="Slide 2"
          ></button>
          <button
            class="impact-dot"
            data-slide="2"
            aria-label="Slide 3"
          ></button>
          <button
            class="impact-dot"
            data-slide="3"
            aria-label="Slide 4"
          ></button>
        </div>
      </div>
    </section>

    <!-- Impact Visualization -->
    <section class="impact-visualization">
    <div class="fatality-two-col">
    
    <!-- LEFT COLUMN: COUNTRY CARDS -->
    <div class="fatality-country-list">
      <div class="country-card" data-country="india">India</div>
      <div class="country-card" data-country="brazil">Brazil</div>
      <div class="country-card" data-country="niger">Niger</div>
    </div>
  
    <!-- RIGHT COLUMN: VISUALIZATION -->
    <div class="fatality-viz">
      <div class="fatality-title">Disaster Mortality Breakdown</div>
  
      <div id="people-grid" class="people-grid"></div>
  
      <div class="legend">
        <span><span class="legend-box flood"></span> Flood</span>
        <span><span class="legend-box storm"></span> Storm</span>
        <span><span class="legend-box drought"></span> Drought</span>
        <span><span class="legend-box other"></span> Other</span>
      </div>
  
      <div id="raw-numbers" class="raw-numbers"></div>
    </div>
  
  </div>
  
  </section>


    <!-- WRITEUP SECTION -->
    <section id="writeup" class="section section-climate">
      <div class="climate-wrapper">
        <h2>Writeup</h2>
        <p class="climate-intro">
          1. What have you done so far?
          So far, we have created the landing page of our project website, which
          has rain animation that reflects our monsoon topic. We also have
          created the next part, where we introduce what is a monsoon and the
          three specific monsoons we will focus on. We have implemented a
          rotating globe, in which when you click on each monsoon explanation
          section, the globe will rotate to the center of the monsoon. We have
          also created a radial plot of historic precipitation every month for
          years 1995~2014 to show how monsoons normally behave. Finally, we
          added some of the research we did on why focusing on monsoon patterns
          matter.
        </p>
        <p class="climate-intro">
          2. What will be the most challenging of your project to design and
          why? We believe the most challenging part of our project is to create
          three of everything because we are focusing on three major monsoons.
          Specifically, at the very end of the website we plan to have a world
          map with all the data, similar to our project 3. However, unlike
          project 3 where it did not zoom in, we are going to create a zoom in
          feature for all three of the monsoons and compare two SSPs. This
          requires a lot of data and involves a lot of interactive elements,
          which we believe will be the most challenging.
        </p>
      </div>
    </section>

    <!-- Libraries then your script -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/globe.gl@2.45.0/dist/globe.gl.min.js"></script>
    <script src="main.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      const ism    = document.getElementById("ism-slideshow-frame");
      const wam    = document.getElementById("wam-slideshow-frame");
      const sam    = document.getElementById("sam-slideshow-frame");

      const ismCap = document.getElementById("ism-slideshow-caption");
      const wamCap = document.getElementById("wam-slideshow-caption");
      const samCap = document.getElementById("sam-slideshow-caption");

      // Decades you have data for
      const decades = [
        "1850s","1860s","1870s","1880s","1890s",
        "1900s","1910s","1920s","1930s","1940s",
        "1950s","1960s","1970s","1980s","1990s",
        "2000s","2010s","2020s","2030s","2050s",
        "2060s","2070s","2080s","2090s","2100s"
      ];

      // Monsoon-season months (using 3-letter codes from filenames)
      const ISM_MONTHS  = ["Jun","Jul","Aug","Sep"];              // June–September
      const SAMS_MONTHS = ["Jun","Jul","Aug","Sep"];              // June–September
      const WAM_MONTHS  = ["Oct","Nov","Dec","Jan","Feb","Mar"];  // October–March

      // Optional pretty labels (can tweak if you want “September” instead of “Sep”)
      const MONTH_LABEL = {
        Jan: "January",
        Feb: "February",
        Mar: "March",
        Apr: "April",
        May: "May",
        Jun: "June",
        Jul: "July",
        Aug: "August",
        Sep: "September",
        Oct: "October",
        Nov: "November",
        Dec: "December"
      };

      const BASE = "monsoon/"; // index.html and monsoon/ are siblings

      // Build [ {month, decade}, ... ] in the order you want:
      // 1850s Jun, 1850s Jul, 1850s Aug, 1850s Sep, 1860s Jun, ...
      function buildFrames(monthsArray) {
        const frames = [];
        for (const decade of decades) {
          for (const m of monthsArray) {
            frames.push({ month: m, decade });
          }
        }
        return frames;
      }

      const framesISM  = buildFrames(ISM_MONTHS);
      const framesSAMS = buildFrames(SAMS_MONTHS);
      const framesWAM  = buildFrames(WAM_MONTHS);

      let idxISM = 0;
      let idxWAM = 0;
      let idxSAMS = 0;

      const SPEED = 1500; // ms per step; change if too fast/slow

      function show() {
        const fISM  = framesISM[idxISM];
        const fWAM  = framesWAM[idxWAM];
        const fSAMS = framesSAMS[idxSAMS];

        // Build file paths according to your naming convention
        const ismPath  = `${BASE}ISM/ISM_${fISM.month}_${fISM.decade}.png`;
        const wamPath  = `${BASE}WAM/WAM_${fWAM.month}_${fWAM.decade}.png`;
        const samsPath = `${BASE}SAMS/SAMS_${fSAMS.month}_${fSAMS.decade}.png`;

        console.log("ISM:", ismPath, "WAM:", wamPath, "SAMS:", samsPath);

        ism.src = ismPath;
        wam.src = wamPath;
        sam.src = samsPath;

        ismCap.textContent  = `${MONTH_LABEL[fISM.month] || fISM.month} · Indian Summer Monsoon – ${fISM.decade}`;
        wamCap.textContent  = `${MONTH_LABEL[fWAM.month] || fWAM.month} · West African Monsoon – ${fWAM.decade}`;
        samCap.textContent  = `${MONTH_LABEL[fSAMS.month] || fSAMS.month} · South American Monsoon – ${fSAMS.decade}`;
      }

      // Initial frame
      show();

      // Advance each monsoon through its own full (month, decade) sequence
      setInterval(() => {
        idxISM  = (idxISM  + 1) % framesISM.length;
        idxWAM  = (idxWAM  + 1) % framesWAM.length;
        idxSAMS = (idxSAMS + 1) % framesSAMS.length;
        show();
      }, SPEED);
    });
    </script>



  </body>
</html>
